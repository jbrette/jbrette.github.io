---
layout: post
title:  "Install Home Assistant on Raspberry Cluster"
date:   2018-07-04
categories: jekyll update
published: true
---

## Goal

- Use the 3 nodes Raspeberry Cluster
- Access the WIFI, ZWave and Zigbee network
- Leverage the Nortek HUSBZB-1 Zwave and Zigbee dongle.
- Install [Home Assistant](https://www.home-assistant.io/) on node 2 of the cluster

![](/images/IMG_0344.JPG)

## What OS 

- [Home Assistant haas.io](https://www.home-assistant.io/hassio/installation/) does not support Raspberry 3 B+ yet.
- haas.io is based on ResinOS. [ResinOS](https://resinos.io/#downloads-raspberrypi) is not using docker anymore but balena which does not support kubernetes yet [See Issue](https://github.com/resin-os/balena/issues/84)
- Continue to use HyperiotOS

## Install AppArmor and download docker container
~~~
cat newpgklist

apparmor-utils
apt-transport-https
avahi-daemon
ca-certificates
curl
dbus
jq
network-manager
socat
software-properties-common
~~~

~~~
for i in `cat newpgklist`
do
sudo apt-get install -y $i
done
~~~

Download and run the installation script. Will attempt to replace it by Kubernetes/Helm script.
~~~
curl -sL https://raw.githubusercontent.com/home-assistant/hassio-build/master/install/hassio_install > hassio_install
./hassio_install -m raspberrypi3
~~~

## Installed Services

### hassio-apparmor service

~~~
cat /etc/systemd/system/hassio-apparmor.service

[Unit]
Description=Hass.io AppArmor
Wants=hassio-supervisor.service
Before=docker.service hassio-supervisor.service

[Service]
Type=oneshot
RemainAfterExit=true
ExecStart=/usr/sbin/hassio-apparmor

[Install]
WantedBy=multi-user.target
~~~

~~~
cat /usr/sbin/hassio-apparmor

#!/bin/sh
set -e

# Load configs
CONFIG_FILE=/etc/hassio.json

# Read configs
DATA="$(jq --raw-output '.data // "/usr/share/hassio"' ${CONFIG_FILE})"
PROFILES_DIR=${DATA}/apparmor
CACHE_DIR="${PROFILES_DIR}/cache"
REMOVE_DIR="${PROFILES_DIR}/remove"

# Exists AppArmor
if ! command -v apparmor_parser > /dev/null 2>&1; then
    echo "[Warning]: No apparmor_parser on host system!"
    exit 0
fi

# Check folder structure
mkdir -p ${PROFILES_DIR}
mkdir -p ${CACHE_DIR}
mkdir -p ${REMOVE_DIR}

# Load/Update exists/new profiles
for profile in ${PROFILES_DIR}/*; do
    if [ ! -f ${profile} ]; then
        continue
    fi

    # Load Profile
    if ! apparmor_parser -r -W -L ${CACHE_DIR} ${profile}; then
        echo "[Error]: Can't load profile ${profile}"
    fi
done

# Cleanup old profiles
for profile in ${REMOVE_DIR}/*; do
    if [ ! -f ${profile} ]; then
        continue
    fi

    # Unload Profile
    if apparmor_parser -R -W -L ${CACHE_DIR} ${profile}; then
        if rm ${profile}; then
            continue
        fi
    fi
    echo "[Error]: Can't remove profile ${profile}"
done
~~~

### hassio-supervisor service

Main run seems to start hassio-supervisor

~~~
cat /etc/systemd/system/hassio-supervisor.service

[Unit]
Description=Hass.io supervisor
Requires=docker.service
After=docker.service dbus.socket

[Service]
Type=simple
Restart=always
RestartSec=5s
ExecStartPre=-/usr/bin/docker stop hassio_supervisor
ExecStart=/usr/sbin/hassio-supervisor
ExecStop=-/usr/bin/docker stop hassio_supervisor

[Install]
WantedBy=multi-user.target
~~~

~~~
cat /usr/sbin/hassio-supervisor

#!/bin/sh
set -e

# Load configs
CONFIG_FILE=/etc/hassio.json

SUPERVISOR="$(jq --raw-output '.supervisor' ${CONFIG_FILE})"
HOMEASSISTANT="$(jq --raw-output '.homeassistant' ${CONFIG_FILE})"
DATA="$(jq --raw-output '.data // "/usr/share/hassio"' ${CONFIG_FILE})"

# AppArmor Support
if command -v apparmor_parser > /dev/null 2>&1 && grep hassio-supervisor /sys/kernel/security/apparmor/profiles > /dev/null 2>&1; then
    APPARMOR="--security-opt apparmor=hassio-supervisor"
else
    APPARMOR="--security-opt apparmor=unconfined"
fi

# Init supervisor
HASSIO_DATA=${DATA}
HASSIO_IMAGE_ID=$(docker inspect --format='{{.Id}}' ${SUPERVISOR})
HASSIO_CONTAINER_ID=$(docker inspect --format='{{.Image}}' hassio_supervisor || echo "")

runSupervisor() {
    docker rm --force hassio_supervisor || true
    docker run --name hassio_supervisor \
        $APPARMOR \
        --security-opt seccomp=unconfined \
        -v /var/run/docker.sock:/var/run/docker.sock \
        -v /var/run/dbus:/var/run/dbus \
        -v ${HASSIO_DATA}:/data \
        -e SUPERVISOR_SHARE=${HASSIO_DATA} \
        -e SUPERVISOR_NAME=hassio_supervisor \
        -e HOMEASSISTANT_REPOSITORY=${HOMEASSISTANT} \
        ${SUPERVISOR}
}

# Run supervisor
mkdir -p ${HASSIO_DATA}
([ "${HASSIO_IMAGE_ID}" = "${HASSIO_CONTAINER_ID}" ] && docker start --attach hassio_supervisor) || runSupervisor
~~~

## Docker traces

docker ps shows homeassistance images downloaded but no controlled yet by Kubernetes

~~~
sudo docker ps

CONTAINER ID        IMAGE                                      COMMAND                  CREATED             STATUS              PORTS               NAMES
e1fd86ed3b20        homeassistant/raspberrypi3-homeassistant   "/bin/entry.sh pytho…"   28 minutes ago      Up 28 minutes                           homeassistant
f05058843583        homeassistant/armhf-hassio-supervisor      "python3 -m hassio"      30 minutes ago      Up 30 minutes                           hassio_supervisor

65d89478378b        d7ebe361fe95                               "/usr/local/bin/kube…"   30 minutes ago      Up 30 minutes                           k8s_kube-proxy_kube-proxy-4chwh_kube-system_68b68391-80b7-11e8-acaf-b827ebd5ad4c_2
9b8c7c2d431e        k8s.gcr.io/pause:3.1                       "/pause"                 30 minutes ago      Up 30 minutes                           k8s_POD_kube-proxy-4chwh_kube-system_68b68391-80b7-11e8-acaf-b827ebd5ad4c_2
8513e6cc5125        184e05022e7f                               "/opt/bin/flanneld -…"   About an hour ago   Up About an hour                        k8s_kube-flannel_kube-flannel-ds-wqxsz_kube-system_95f94b5f-80ba-11e8-acaf-b827ebd5ad4c_2
1aee6f79fe8e        k8s.gcr.io/pause:3.1                       "/pause"                 About an hour ago   Up About an hour                        k8s_POD_kube-flannel-ds-wqxsz_kube-system_95f94b5f-80ba-11e8-acaf-b827ebd5ad4c_1

~~~
~~~
# docker attach --sig-proxy=false f05058843583

18-07-06 06:50:19 INFO (MainThread) [hassio.addons] Load addons: 41 all - 41 new - 0 remove
18-07-06 06:50:19 INFO (MainThread) [hassio.updater] Fetch update data from https://s3.amazonaws.com/hassio-version/stable.json
18-07-06 06:50:19 INFO (MainThread) [hassio.snapshots] Found 0 snapshot files
18-07-06 06:50:19 INFO (MainThread) [__main__] Run HassIO
18-07-06 06:50:19 INFO (MainThread) [hassio.misc.dns] Start DNS port forwarding for host add-ons
18-07-06 06:50:19 INFO (MainThread) [hassio.core] Ignore Hass.io auto updates on dev channel
18-07-06 06:50:19 INFO (MainThread) [hassio.core] Start API on 172.30.32.2
18-07-06 06:50:19 INFO (MainThread) [hassio.addons] Startup initialize run 0 addons
18-07-06 06:50:19 INFO (MainThread) [hassio.addons] Startup system run 0 addons
18-07-06 06:50:19 INFO (MainThread) [hassio.addons] Startup services run 0 addons
18-07-06 06:50:21 INFO (SyncWorker_0) [hassio.docker.homeassistant] Start homeassistant homeassistant/raspberrypi3-homeassistant with version 0.73.0b6
18-07-06 06:51:01 INFO (MainThread) [hassio.homeassistant] Detect a running Home-Assistant instance
18-07-06 06:51:01 INFO (MainThread) [hassio.addons] Startup application run 0 addons
18-07-06 06:51:01 INFO (MainThread) [hassio.tasks] All core tasks are scheduled
18-07-06 06:51:01 INFO (MainThread) [hassio.core] Hass.io is up and running
~~~

### First Setup

![](/images/HomeAssistant.png)


### Enable the zigbee/zwave dongle

Locate the container
~~~
sudo docker ps | grep homea

1fba92d1b40e        homeassistant/raspberrypi3-homeassistant   "/bin/entry.sh pytho…"   34 minutes ago      Up 34 minutes                           homeassistant
4c3f66563a3c        homeassistant/armhf-hassio-supervisor      "python3 -m hassio"      6 hours ago         Up 34 minutes                           hassio_supervisor
~~~

Enter the docker container
~~~
sudo docker exec -ti 1fba92d1b40e /bin/bash
~~~

Edit the configuration file
~~~
vi /config/configuration.yaml

zwave:
  usb_path: /dev/ttyUSB0

zha:
  usb_path: /dev/ttyUSB1
  database_path: /config/zigbee.db
~~~

Reload the configuration file
Access the UI and invoked reload core
~~~
http://192.168.1.92:8123/config/core
~~~

~~~
sudo docker ps | grep homea

702fd9424bfd        homeassistant/raspberrypi3-homeassistant   "/bin/entry.sh pytho…"   40 seconds ago      Up 38 seconds                           homeassistant
4c3f66563a3c        homeassistant/armhf-hassio-supervisor      "python3 -m hassio"      6 hours ago         Up 43 minutes                           hassio_supervisor
~~~

Let's get back in zigbee.db now exists

~~~
sudo docker exec -ti 702fd9424bfd /bin/bash

bash-4.4# ls -lt
total 1928
-rw-r--r--    1 root     root       1802240 Jul  6 21:05 home-assistant_v2.db
-rw-r--r--    1 root     root         32768 Jul  6 21:05 home-assistant_v2.db-shm
-rw-r--r--    1 root     root            32 Jul  6 21:05 home-assistant_v2.db-wal
-rw-r--r--    1 root     root         14971 Jul  6 21:05 OZW_Log.txt
-rw-r--r--    1 root     root         45056 Jul  6 21:05 zigbee.db
-rw-r--r--    1 root     root           227 Jul  6 21:05 home-assistant.log
-rw-r--r--    1 root     root         32768 Jul  6 21:05 pyozw.sqlite
-rw-r--r--    1 root     root          1122 Jul  6 21:05 options.xml
-rw-r--r--    1 root     root          1866 Jul  6 21:01 configuration.yaml
drwxr-xr-x    2 root     root          4096 Jul  6 06:50 tts
-rw-r--r--    1 root     root             2 Jul  6 06:50 automations.yaml
-rw-r--r--    1 root     root             0 Jul  6 06:50 customize.yaml
-rw-r--r--    1 root     root             0 Jul  6 06:50 groups.yaml
-rw-r--r--    1 root     root             0 Jul  6 06:50 scripts.yaml
-rw-r--r--    1 root     root           157 Jul  6 06:50 secrets.yaml
drwxr-xr-x    2 root     root          4096 Jul  6 06:50 deps
~~~

### Investigation

~~~
pyozw_check -i -d /dev/ttyUSB0
~~~
~~~
bash-4.4# pyozw_check -d /dev/ttyUSB0
-------------------------------------------------------------------------------
Import libs
Try to import libopenzwave
Try to import libopenzwave.PyLogLevels
Try to get options
Try to get manager
Try to get python_openzwave version
0.4.3
Try to get python_openzwave full version
python_openzwave version 0.4.3 (embed-cython / Jul  4 2018 - 18:58:22)
Try to get openzwave version
1.4.2926
Try to get default config path
/usr/lib/python3.6/site-packages/python_openzwave/ozw_config
Try to destroy manager
Try to destroy options
Try to import openzwave (API)
~~~

~~~

/usr/lib/python3.6/site-packages/homeassistant/components/zwave/__init__.py
~~~

### Links

Discovery seems to need --network host if you want to discover the UPnP devices

~~~
[Link1](https://www.home-assistant.io/components/discovery/)
[Link2](https://github.com/OpenZWave/python-openzwave)
~~~

OpenZWave.txt

~~~~
2018-07-07 05:11:04.866 Always, OpenZwave Version 1.4.2926 Starting Up
2018-07-07 05:11:20.242 Info, Setting Up Provided Network Key for Secure Communications
2018-07-07 05:11:20.242 Warning, Failed - Network Key Not Set
2018-07-07 05:11:20.243 Info, mgr,     Added driver for controller /dev/ttyUSB0
2018-07-07 05:11:20.243 Info,   Opening controller /dev/ttyUSB0
2018-07-07 05:11:20.243 Info, Trying to open serial port /dev/ttyUSB0 (attempt 1)
2018-07-07 05:11:20.245 Info, Serial port /dev/ttyUSB0 opened (attempt 1)
2018-07-07 05:11:20.245 Detail, contrlr, Queuing (Command) FUNC_ID_ZW_GET_VERSION: 0x01, 0x03, 0x00, 0x15, 0xe9
2018-07-07 05:11:20.245 Detail, contrlr, Queuing (Command) FUNC_ID_ZW_MEMORY_GET_ID: 0x01, 0x03, 0x00, 0x20, 0xdc
2018-07-07 05:11:20.246 Detail, contrlr, Queuing (Command) FUNC_ID_ZW_GET_CONTROLLER_CAPABILITIES: 0x01, 0x03, 0x00, 0x05, 0xf9
2018-07-07 05:11:20.246 Detail, contrlr, Queuing (Command) FUNC_ID_SERIAL_API_GET_CAPABILITIES: 0x01, 0x03, 0x00, 0x07, 0xfb
2018-07-07 05:11:20.246 Detail, contrlr, Queuing (Command) FUNC_ID_ZW_GET_SUC_NODE_ID: 0x01, 0x03, 0x00, 0x56, 0xaa
2018-07-07 05:11:20.246 Detail,
2018-07-07 05:11:20.246 Info, contrlr, Sending (Command) message (Callback ID=0x00, Expected Reply=0x15) - FUNC_ID_ZW_GET_VERSION: 0x01, 0x03, 0x00, 0x15, 0xe9
2018-07-07 05:11:20.250 Detail, contrlr,   Received: 0x01, 0x10, 0x01, 0x15, 0x5a, 0x2d, 0x57, 0x61, 0x76, 0x65, 0x20, 0x34, 0x2e, 0x30, 0x35, 0x00, 0x01, 0x97
2018-07-07 05:11:20.250 Detail,
2018-07-07 05:11:20.250 Info, contrlr, Received reply to FUNC_ID_ZW_GET_VERSION:
2018-07-07 05:11:20.250 Info, contrlr,     Static Controller library, version Z-Wave 4.05
2018-07-07 05:11:20.250 Detail, Node045,   Expected reply was received
2018-07-07 05:11:20.250 Detail, Node045,   Message transaction complete
2018-07-07 05:11:20.250 Detail,
2018-07-07 05:11:20.250 Detail, contrlr, Removing current message
2018-07-07 05:11:20.251 Detail,
2018-07-07 05:11:20.251 Info, contrlr, Sending (Command) message (Callback ID=0x00, Expected Reply=0x20) - FUNC_ID_ZW_MEMORY_GET_ID: 0x01, 0x03, 0x00, 0x20, 0xdc
2018-07-07 05:11:20.254 Detail, contrlr,   Received: 0x01, 0x08, 0x01, 0x20, 0xec, 0x5a, 0x75, 0x19, 0x01, 0x0d
2018-07-07 05:11:20.254 Detail,
2018-07-07 05:11:20.254 Info, contrlr, Received reply to FUNC_ID_ZW_MEMORY_GET_ID. Home ID = 0xec5a7519.  Our node ID = 1
2018-07-07 05:11:20.254 Detail, Node090,   Expected reply was received
2018-07-07 05:11:20.254 Detail, Node090,   Message transaction complete
2018-07-07 05:11:20.254 Detail,
2018-07-07 05:11:20.254 Detail, contrlr, Removing current message
2018-07-07 05:11:20.254 Detail,
2018-07-07 05:11:20.254 Info, contrlr, Sending (Command) message (Callback ID=0x00, Expected Reply=0x05) - FUNC_ID_ZW_GET_CONTROLLER_CAPABILITIES: 0x01, 0x03, 0x00, 0x05, 0xf9
2018-07-07 05:11:20.257 Detail, contrlr,   Received: 0x01, 0x04, 0x01, 0x05, 0x28, 0xd7
2018-07-07 05:11:20.257 Detail,
2018-07-07 05:11:20.257 Info, contrlr, Received reply to FUNC_ID_ZW_GET_CONTROLLER_CAPABILITIES:
2018-07-07 05:11:20.257 Info, contrlr,     There is no SUC ID Server (SIS) in this network.
2018-07-07 05:11:20.257 Info, contrlr,     The PC controller is a primary controller.
2018-07-07 05:11:20.257 Detail, Node215,   Expected reply was received
2018-07-07 05:11:20.257 Detail, Node215,   Message transaction complete
2018-07-07 05:11:20.257 Detail,
2018-07-07 05:11:20.257 Detail, contrlr, Removing current message
2018-07-07 05:11:20.257 Detail,
2018-07-07 05:11:20.257 Info, contrlr, Sending (Command) message (Callback ID=0x00, Expected Reply=0x07) - FUNC_ID_SERIAL_API_GET_CAPABILITIES: 0x01, 0x03, 0x00, 0x07, 0xfb
2018-07-07 05:11:20.263 Detail, contrlr,   Received: 0x01, 0x2b, 0x01, 0x07, 0x04, 0x20, 0x00, 0x00, 0x00, 0x01, 0x00, 0x01, 0xfe, 0x81, 0xff, 0x88, 0xcf, 0x1f, 0x00, 0x00, 0xfb, 0x9f, 0x7d,
2018-07-07 05:11:20.263 Detail,
2018-07-07 05:11:20.263 Info, contrlr,  Received reply to FUNC_ID_SERIAL_API_GET_CAPABILITIES
2018-07-07 05:11:20.264 Info, contrlr,     Serial API Version:   4.32
2018-07-07 05:11:20.264 Info, contrlr,     Manufacturer ID:      0x0000
2018-07-07 05:11:20.264 Info, contrlr,     Product Type:         0x0001
2018-07-07 05:11:20.264 Info, contrlr,     Product ID:           0x0001
2018-07-07 05:11:20.264 Detail, contrlr, Queuing (Command) FUNC_ID_ZW_GET_RANDOM: 0x01, 0x04, 0x00, 0x1c, 0x20, 0xc7
2018-07-07 05:11:20.264 Detail, contrlr, Queuing (Command) FUNC_ID_SERIAL_API_GET_INIT_DATA: 0x01, 0x03, 0x00, 0x02, 0xfe
2018-07-07 05:11:20.264 Detail, contrlr, Queuing (Command) FUNC_ID_SERIAL_API_SET_TIMEOUTS: 0x01, 0x05, 0x00, 0x06, 0x64, 0x0f, 0x97
2018-07-07 05:11:20.264 Detail, contrlr, Queuing (Command) FUNC_ID_SERIAL_API_APPL_NODE_INFORMATION: 0x01, 0x07, 0x00, 0x03, 0x01, 0x02, 0x01, 0x00, 0xf9
2018-07-07 05:11:20.264 Detail, Node032,   Expected reply was received
2018-07-07 05:11:20.264 Detail, Node032,   Message transaction complete
2018-07-07 05:11:20.264 Detail,
2018-07-07 05:11:20.264 Detail, contrlr, Removing current message
2018-07-07 05:11:20.264 Detail,
2018-07-07 05:11:20.264 Info, contrlr, Sending (Command) message (Callback ID=0x00, Expected Reply=0x56) - FUNC_ID_ZW_GET_SUC_NODE_ID: 0x01, 0x03, 0x00, 0x56, 0xaa
2018-07-07 05:11:20.267 Detail, contrlr,   Received: 0x01, 0x04, 0x01, 0x56, 0x00, 0xac
2018-07-07 05:11:20.280 Detail,
2018-07-07 05:11:20.280 Info, contrlr, Received reply to GET_SUC_NODE_ID.  Node ID = 0
2018-07-07 05:11:20.280 Info, Controller Does not Support SUC - Cannot Setup Controller as SUC Node
2018-07-07 05:11:20.280 Detail, Node172,   Expected reply was received
2018-07-07 05:11:20.281 Detail, Node172,   Message transaction complete
2018-07-07 05:11:20.281 Detail,
2018-07-07 05:11:20.281 Detail, contrlr, Removing current message
2018-07-07 05:11:20.281 Detail,
2018-07-07 05:11:20.281 Info, contrlr, Sending (Command) message (Callback ID=0x00, Expected Reply=0x1c) - FUNC_ID_ZW_GET_RANDOM: 0x01, 0x04, 0x00, 0x1c, 0x20, 0xc7
2018-07-07 05:11:20.335 Detail, contrlr,   Received: 0x01, 0x25, 0x01, 0x1c, 0x01, 0x20, 0x05, 0xee, 0x89, 0xf8, 0xcc, 0xfc, 0x39, 0xec, 0xc6, 0xe2, 0xe8, 0x96, 0x54, 0xe1, 0x49, 0x4f, 0x2b,
2018-07-07 05:11:20.335 Detail,
2018-07-07 05:11:20.335 Info, contrlr, Received reply to FUNC_ID_ZW_GET_RANDOM: true
2018-07-07 05:11:20.335 Detail, Node032,   Expected reply was received
2018-07-07 05:11:20.335 Detail, Node032,   Message transaction complete
2018-07-07 05:11:20.335 Detail,
2018-07-07 05:11:20.335 Detail, contrlr, Removing current message
2018-07-07 05:11:20.335 Detail,
2018-07-07 05:11:20.335 Info, contrlr, Sending (Command) message (Callback ID=0x00, Expected Reply=0x02) - FUNC_ID_SERIAL_API_GET_INIT_DATA: 0x01, 0x03, 0x00, 0x02, 0xfe
2018-07-07 05:11:20.393 Detail, contrlr,   Received: 0x01, 0x25, 0x01, 0x02, 0x05, 0x00, 0x1d, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
2018-07-07 05:11:20.393 Detail,
2018-07-07 05:11:20.393 Info, mgr,     Driver with Home ID of 0xec5a7519 is now ready.
2018-07-07 05:11:20.393 Info,
2018-07-07 05:11:20.394 Info, contrlr, Received reply to FUNC_ID_SERIAL_API_GET_INIT_DATA:
2018-07-07 05:11:20.394 Info, contrlr,     Node 001 - Known
2018-07-07 05:11:20.394 Detail, Node001, AdvanceQueries queryPending=0 queryRetries=0 queryStage=CacheLoad live=1
2018-07-07 05:11:20.394 Detail, Node001, QueryStage_CacheLoad
2018-07-07 05:11:20.394 Info, Node001, Node Identity Codes: 0000:0001:0001
2018-07-07 05:11:20.394 Detail, Node001, QueryStage_Associations
2018-07-07 05:11:20.394 Detail, Node001, QueryStage_Neighbors
2018-07-07 05:11:20.394 Detail, contrlr, Requesting routing info (neighbor list) for Node 1
2018-07-07 05:11:20.394 Detail, Node001, Queuing (Command) Get Routing Info (Node=1): 0x01, 0x07, 0x00, 0x80, 0x01, 0x00, 0x00, 0x03, 0x7a
2018-07-07 05:11:20.394 Detail, Node001, Queuing (Query) Query Stage Complete (Neighbors)
2018-07-07 05:11:20.394 Detail,   Expected reply was received
2018-07-07 05:11:20.394 Detail,   Message transaction complete
2018-07-07 05:11:20.394 Detail,
2018-07-07 05:11:20.394 Detail, contrlr, Removing current message
2018-07-07 05:11:20.395 Detail, Node001, Notification: DriverReady
2018-07-07 05:11:20.402 Detail, Node001, Notification: NodeAdded
2018-07-07 05:11:20.430 Detail, Node001, Notification: NodeProtocolInfo
2018-07-07 05:11:20.432 Detail, Node001, Notification: EssentialNodeQueriesComplete
2018-07-07 05:11:20.432 Detail, Node001, Notification: ValueAdded
2018-07-07 05:11:20.433 Detail,
2018-07-07 05:11:20.434 Info, contrlr, Sending (Command) message (Callback ID=0x00, Expected Reply=0x06) - FUNC_ID_SERIAL_API_SET_TIMEOUTS: 0x01, 0x05, 0x00, 0x06, 0x64, 0x0f, 0x97
2018-07-07 05:11:20.436 Detail, contrlr,   Received: 0x01, 0x05, 0x01, 0x06, 0x64, 0x0f, 0x96
2018-07-07 05:11:20.437 Detail,
2018-07-07 05:11:20.437 Info, contrlr, Received reply to FUNC_ID_SERIAL_API_SET_TIMEOUTS
2018-07-07 05:11:20.437 Detail, Node015,   Expected reply was received
2018-07-07 05:11:20.437 Detail, Node015,   Message transaction complete
2018-07-07 05:11:20.437 Detail,
2018-07-07 05:11:20.437 Detail, contrlr, Removing current message
2018-07-07 05:11:20.437 Detail,
2018-07-07 05:11:20.437 Info, contrlr, Sending (Command) message (Callback ID=0x00, Expected Reply=0x00) - FUNC_ID_SERIAL_API_APPL_NODE_INFORMATION: 0x01, 0x07, 0x00, 0x03, 0x01, 0x02, 0x01,
2018-07-07 05:11:20.439 Detail, contrlr, Removing current message
2018-07-07 05:11:20.439 Detail,
2018-07-07 05:11:20.439 Info, Node001, Sending (Command) message (Callback ID=0x00, Expected Reply=0x80) - Get Routing Info (Node=1): 0x01, 0x07, 0x00, 0x80, 0x01, 0x00, 0x00, 0x03, 0x7a
2018-07-07 05:11:20.446 Detail, Node001,   Received: 0x01, 0x20, 0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
2018-07-07 05:11:20.466 Detail,
2018-07-07 05:11:20.466 Info, Node001, Received reply to FUNC_ID_ZW_GET_ROUTING_INFO
2018-07-07 05:11:20.466 Info, Node001,     Neighbors of this node are:
2018-07-07 05:11:20.466 Info, Node001,  (none reported)
2018-07-07 05:11:20.466 Detail,   Expected reply was received
2018-07-07 05:11:20.466 Detail,   Message transaction complete
2018-07-07 05:11:20.466 Detail,
2018-07-07 05:11:20.466 Detail, Node001, Removing current message
2018-07-07 05:11:20.466 Detail, Node001, Query Stage Complete (Neighbors)
2018-07-07 05:11:20.466 Detail, Node001, AdvanceQueries queryPending=0 queryRetries=0 queryStage=Session live=1
2018-07-07 05:11:20.467 Detail, Node001, QueryStage_Session
2018-07-07 05:11:20.467 Detail, Node001, QueryStage_Dynamic
2018-07-07 05:11:20.467 Detail, Node001, QueryStage_Configuration
2018-07-07 05:11:20.467 Detail, Node001, QueryStage_Complete
2018-07-07 05:11:20.467 Warning, CheckCompletedNodeQueries m_allNodesQueried=0 m_awakeNodesQueried=0
2018-07-07 05:11:20.467 Warning, CheckCompletedNodeQueries all=1, deadFound=0 sleepingOnly=1
2018-07-07 05:11:20.467 Info,          Node query processing complete.
2018-07-07 05:11:20.467 Detail, Node001, Notification: NodeQueriesComplete
2018-07-07 05:11:20.469 Detail, contrlr, Notification: AllNodesQueried
~~~
