---
layout: post
title:  "Creating a Raspberry 3 B+ Kubernetes Cluster"
date:   2018-07-03
categories: jekyll update
published: true
---
## Goal

- Build a Raspberry 3B+ Cluster
- Deploy Kubernetes on that Cluster

## Hardware

### Reference Links

- [Video](https://www.youtube.com/watch?v=KJKhRLKXr-Q)

### Procedure

- Kind of followed the video
- Used a premade rack instead.
- Adapt to Raspberry 3B+ (1Gb card instead of 100Mb card)

### Result

#### 5 nodes cluster

![](/images/IMG_0339.JPG)

#### 3 nodes cluster

![](/images/IMG_0344.JPG)

## OS

### Reference Links

- [Video](https://www.youtube.com/watch?v=eZ5uX-JJbyY)
- [HypriotOS](https://github.com/hypriot/image-builder-rpi/releases)

### Procedure

- Use HypriotOS because the quickest to set up. SSH and Docker supported by default
- Ubuntu Core was not ready for Raspberry 3B +
- Even if processor is 64bits, OS is still 32bits. (Memory is small anyway).
- Resion.io OS is not supporting docker anymore but balena instead. It would not work with Kubernetes.
- Video had a couple of typo in DHCP installation
- Removed cloud-init once the site was up.
- TBD

## Kubernetes

### Reference Links

- [kubeadm1](https://blog.hypriot.com/post/setup-kubernetes-raspberry-pi-cluster/)
- [kubeadm2](https://kubecloud.io/setup-a-kubernetes-1-9-0-raspberry-pi-cluster-on-raspbian-using-kubeadm-f8b3b85bc2d1)

### Procedure

- Issue at first with 10.04. Kubelet not starting. Downgraded with Kubernetes 1.9.x

### Kubernetes Dashboard

![](/images/2018_06_12__03_12_50.png)

